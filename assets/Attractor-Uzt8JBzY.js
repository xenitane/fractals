import{r as C,j as e,c as a,a as R,B as N,u as L,N as T}from"./index-SMjkW2pv.js";import{m as b,a as w}from"./complex-w3zDMYH0.js";import{j as k,u as $,F as G,b as v,d as y,e as F,f as S,I as E,g as A,h as V,i as H,z as p,t as z,S as B}from"./SVGCanvas-fwBxKJpS.js";import{A as j}from"./Attractor-92myYh06.js";function P(n,{order:o,animate:i,AttractorInfo:r,interval:m}){const h=Math.pow(10,o),x=r.scale,f=r.shift,l=r.origins.length;if(i){const s=Array.from({length:l},(t,d)=>Array.from({length:h},()=>[r.origins[d][0],r.origins[d][1]])),u=s.map(t=>t.map(d=>{const[g,D]=b(w(d,f),x),M=k({x:g,y:-D,color:[0,0,0]});return n.appendChild(M),M}));let c=0;m.i=setInterval(()=>{for(let t=0;t<l;t++)s[t][(c+1)%h]=r.rules(s[t][c]);c=(c+1)%h;for(let t=0;t<l;t++){const[d,g]=b(w(s[t][c],f),x);if(isNaN(d)||isNaN(g))throw new Error("wtf");u[t][c].setAttributeNS(null,"cx",`${d}`),u[t][c].setAttributeNS(null,"cy",`${-g}`)}},1)}else{const s=r.origins;for(let u=0;u<Math.pow(10,o);u++)for(let c=0;c<l;c++){const[t,d]=b(w(s[c],f),x);if(isNaN(t)||isNaN(d))throw new Error("wtf");n.appendChild(k({x:t,y:-d,color:[0,0,0]})),s[c]=r.rules(s[c])}}}function I(n,o){const i={order:p.coerce.number().min(0,{message:"should be greater than or equal to 0"}).max(n,{message:`should be less than or equal to ${n}`}).int({message:"Must be an Integer Value"}),animate:p.boolean()};for(const r of o)i[r[0]]=p.coerce.number().finite();return p.object(i)}const q=C.forwardRef(({handleSubmit:n,SVGReset:o,handleSave:i,maxOrder:r,symbols:m},h)=>{const x={order:r-1,animate:!1};for(const s of m)x[s[0]]=s[1];const f=I(r,m),l=$({resolver:z(f),defaultValues:x});return e.jsx(G,{...l,children:e.jsxs("form",{className:"w-full",onSubmit:s=>void l.handleSubmit(n)(s),onReset:()=>{o(),l.reset()},children:[e.jsxs("div",{children:[e.jsx(v,{control:l.control,name:"order",render:({field:s})=>e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:a("w-1/3 text-base","lg:text-lg"),children:"Depth"}),e.jsx(S,{className:"w-11",children:e.jsx(E,{type:"number",className:"h-6 p-2 text-center",...s})})]}),e.jsxs(A,{children:["The iterative depth for the fractal",e.jsx("br",{}),"Must be between 0 and",` ${r}`]}),e.jsx(V,{})]})}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(R,{className:a("my-2 bg-neutral-950","dark:bg-neutral-50")}),e.jsx("div",{className:a("text-xl","lg:text-2xl"),children:"Attractor Paramerters"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-10 gap-y-2",children:m.map(([s])=>e.jsx(v,{control:l.control,name:s,render:({field:u})=>e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:a("w-1/3 text-base","lg:text-lg"),children:s}),e.jsx(S,{className:"w-2/3",children:e.jsx(E,{type:"number",className:"h-6 p-2 text-center",...u})})]}),e.jsx(V,{})]})},s))}),e.jsx("p",{className:"text-sm font-medium text-red-500 dark:text-red-900",ref:h}),e.jsx(R,{className:a("my-2 bg-neutral-950","dark:bg-neutral-50")})]}),e.jsx(v,{control:l.control,name:"animate",render:({field:s})=>e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:a("w-1/3 text-base","lg:text-lg"),children:"Animate"}),e.jsx(S,{children:e.jsx(H,{checked:s.value,onCheckedChange:s.onChange})})]}),e.jsx(A,{children:"Animate the rendition"})]})})]}),e.jsxs("div",{className:"flex w-full justify-between pt-4",children:[e.jsx(N,{type:"submit",className:a("w-1/4 rounded-md"),children:"Draw"}),e.jsx(N,{type:"reset",className:a("w-1/4 rounded-md"),children:"Reset"}),e.jsx(N,{type:"button",className:a("w-1/4 rounded-md"),onClick:i,disabled:!0,children:"Save"})]})]})})});q.displayName="AttractorForm";const U=()=>{const{attrID:n}=L(),o=C.useRef(null),i=C.useRef(null);if(!(n in j))return e.jsx(T,{to:"/geo-vis/404"});const r={i:void 0};function m(){o.current.innerHTML="",clearInterval(r.i),r.i=void 0,i.current&&(i.current.innerHTML="")}function h({order:f,animate:l,...s}){m();try{P(o.current,{order:f,animate:l,interval:r,colored:!1,AttractorInfo:j[n].rules(s)})}catch{m(),i.current&&(i.current.innerHTML="Some Error has occured while calculating, try with different parameters")}}function x(){}return e.jsxs("article",{className:a("flex w-full flex-col gap-8 py-2","lg:flex-row"),children:[e.jsxs("div",{className:a("flex w-full flex-col","lg:w-1/3"),children:[e.jsx("h3",{className:a("pb-4 text-2xl underline","lg:text-3xl"),children:j[n].name}),e.jsx(q,{handleSubmit:h,SVGReset:m,maxOrder:j[n].maxOrder,handleSave:x,symbols:j[n].symbolNames,ref:i})]}),e.jsx("div",{className:a("flex justify-center","lg:w-2/3"),children:e.jsx("div",{className:a("aspect-square w-full rounded-xl bg-slate-200","lg:w-[80vh]"),children:e.jsx(B,{ref:o})})})]})};export{U as default};
//# sourceMappingURL=Attractor-Uzt8JBzY.js.map
