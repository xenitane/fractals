import{a as G,j as u,b as S,c as M,R as O,G as b,r as I}from"./GlobalLayout-DjbPu39w.js";import{c as y,d as o,m as n,a as N,b as j,r as A,k as K,n as V,F as q,S as E}from"./SVG-BTFyOuH0.js";import{r as C,m as R}from"./form-ZDPNzQ86.js";import{E as T}from"./Error-ou0wMxJd.js";import"./arrow-right-C4kEEiQp.js";function L(e,{order:t,animate:p,colored:P,interval:h,FractalInfo:c}){let g=[0,0],d=[1,0];const i=[],s=[[0,0],[0,0]];function B(r,l,f,F){if(typeof F=="string"){for(const a of[...F])[r,l]=w(r,l,a,f);return[r,l]}else{for(const x of[...F[0]])[r,l]=w(r,l,x,f);let a=[r[0],r[1]],m=[l[0],l[1]];for(const x of F[1])a=[r[0],r[1]],m=[l[0],l[1]],[a,m]=B(a,m,f,x);return c.stay?[r,l]:[a,m]}}function w(r,l,f,F){if(F===0||c.rules[f][0]){const[a,m,x]=c.rules[f][1](r,l);return x&&(a[0]!==r[0]||a[1]!==r[1])&&(i.push([[r[0],r[1]],[a[0],a[1]]]),s[0][0]=Math.min(s[0][0],a[0]),s[0][1]=Math.min(s[0][1],a[1]),s[1][0]=Math.max(s[1][0],a[0]),s[1][1]=Math.max(s[1][1],a[1])),[a,m]}return B(r,l,F-1,c.rules[f][2])}[g,d]=w(g,d,"I",t+c.shift);const k=[(s[1][0]+s[0][0])/2,(s[1][1]+s[0][1])/2],v=1800/Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]);for(const r of i)r[0][0]=C((r[0][0]-k[0])*v),r[0][1]=C((r[0][1]-k[1])*v),r[1][0]=C((r[1][0]-k[0])*v),r[1][1]=C((r[1][1]-k[1])*v);if(p){let r=0;h.i=setInterval(()=>{if(r===i.length){clearInterval(h.i);return}e.appendChild(y({color:[0,0,0],start:i[r][0],end:i[r][1]})),r++},5)}else for(const r of i)e.appendChild(y({color:[0,0,0],start:r[0],end:r[1]}))}const W={name:"Peano Sierpinski Carpet",maxOrder:5,rules:()=>({shift:1,stay:!1,rules:{I:[!1,(e,t)=>[...o(e,t),!0],"RF"],F:[!1,(e,t)=>[...n(e,t),!0],["F",["PFNFNF","NFPFPFNF"]]],P:[!0,(e,t)=>[...N(e,t),!0]],N:[!0,(e,t)=>[...j(e,t),!0]],R:[!0,(e,t)=>[...A(e,t),!0]]}})},H={name:"Sierpinski Triangle Skeleton",maxOrder:8,rules:()=>({shift:2,stay:!1,rules:{I:[!1,(e,t)=>[...o(e,t),!0],"KA"],A:[!1,(e,t)=>[...o(e,t),!0],["",["F","PF","NF"]]],F:[!1,(e,t)=>[...n(e,t),!0],["MS",["PF","F","NF"]]],M:[!0,(e,t)=>[...n(e,t),!0]],P:[!0,(e,t)=>[...K(e,t),!0]],N:[!0,(e,t)=>[...V(e,t),!0]],K:[!0,(e,t)=>[...N(e,t),!0]],S:[!0,(e,t)=>[e,R(t,[.5,0]),!0]]}})},z={name:"T Square",maxOrder:7,rules:()=>({shift:2,stay:!1,rules:{I:[!1,(e,t)=>[...o(e,t),!0],"KA"],A:[!1,(e,t)=>[...o(e,t),!0],["",["F","PF","PPF","NF"]]],F:[!1,(e,t)=>[...n(e,t),!0],["MS",["PF","F","NF"]]],M:[!0,(e,t)=>[...n(e,t),!0]],P:[!0,(e,t)=>[...N(e,t),!0]],N:[!0,(e,t)=>[...j(e,t),!0]],K:[!0,(e,t)=>[...A(e,t),!0]],S:[!0,(e,t)=>[e,R(t,[.5,0]),!0]]}})},J={name:"Vicsek Fractal",maxOrder:5,rules:()=>({shift:2,stay:!0,rules:{I:[!1,(e,t)=>[...o(e,t),!0],"KC"],C:[!1,(e,t)=>[...o(e,t),!0],["SCG",["FSDDCG","PFSDDCG","PPFSDDCG","NFSDDCG"]]],S:[!0,(e,t)=>[e,R(t,[1/3,0]),!0]],G:[!0,(e,t)=>[e,R(t,[3,0]),!0]],F:[!1,(e,t)=>[...n(e,t),!0],""],D:[!0,(e,t)=>[...n(e,t),!1]],P:[!0,(e,t)=>[...N(e,t),!0]],N:[!0,(e,t)=>[...j(e,t),!0]],K:[!0,(e,t)=>[...A(e,t),!0]]}})},Q={name:"Sierpinski Carpet",maxOrder:5,rules:()=>({shift:1,stay:!1,rules:{I:[!1,(e,t)=>[...o(e,t),!1],["",["ANF","NBPF"]]],F:[!1,(e,t)=>[...n(e,t),!0],"FFF"],P:[!0,(e,t)=>[...N(e,t),!0]],N:[!0,(e,t)=>[...j(e,t),!0]],A:[!1,(e,t)=>[...n(e,t),!0],["A",["NBPF",["A",[["NB",["BPA","PA"]],"A"]]]]],B:[!1,(e,t)=>[...n(e,t),!0],["B",["PANF",["B",[["PA",["ANB","NB"]],"B"]]]]]}})},D={"peano-sierpinski-carpet":W,"sierpinski-carpet":Q,"sierpinski-triangle-skeleton":H,"t-square":z,"vicsek-fractal":J},U=()=>{var d,i;const e=(i=(d=window.location.search.split("?").at(1))==null?void 0:d.split("&").filter(s=>s.startsWith("id=")).at(0))==null?void 0:i.split("=").at(1),t=G.useRef(null);if(e===void 0||!(e in D))return window.location.href="/geo-vis/404",u.jsx(T,{});const p={i:void 0},P=D[e];function h(){t.current.innerHTML="",clearInterval(p.i),p.i=void 0}function c(s){h(),L(t.current,{...s,interval:p,FractalInfo:P.rules()})}function g(){}return u.jsxs("article",{className:S("flex w-full flex-col gap-8 py-2","lg:flex-row"),children:[u.jsxs("div",{className:S("flex w-full flex-col","lg:w-1/3"),children:[u.jsx("h3",{className:S("pb-4 text-2xl underline","lg:text-3xl"),children:P.name}),u.jsx(q,{handleSubmit:c,SVGReset:h,maxOrder:P.maxOrder,handleSave:g})]}),u.jsx("div",{className:S("flex justify-center","lg:w-2/3"),children:u.jsx("div",{className:S("aspect-square w-full rounded-xl bg-slate-200","lg:w-[80vh]"),children:u.jsx(E,{ref:t})})})]})};M.createRoot(document.querySelector("#root")).render(u.jsx(O.StrictMode,{children:u.jsx(b,{children:u.jsx(U,{})})}));I(console.log);
