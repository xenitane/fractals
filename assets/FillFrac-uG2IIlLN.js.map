{"version":3,"file":"FillFrac-uG2IIlLN.js","sources":["../../src/lib/utils/renderer/Fill.ts","../../src/pages/FillFrac.tsx"],"sourcesContent":["import { FillFractalOptions, Point } from \"@/types\";\nimport { createSVGPathPolygonElement } from \"@/lib/utils\";\n\nexport function FillRenderer(SVGRef: SVGSVGElement, { animate, order, FractalInfo, colored, interval }: FillFractalOptions) {\n\tlet centers: Point[] = [[FractalInfo.origin[0], FractalInfo.origin[1]]];\n\tlet invCenters: Point[] = [];\n\n\tconst downPolyVGen = FractalInfo.polyVGen(order, true);\n\tconst upPolyVGen = FractalInfo.polyVGen(order, false);\n\n\twhile (order--) [centers, invCenters] = FractalInfo.rules(centers, invCenters);\n\n\tif (colored) {\n\t\t// todo: fill color\n\t}\n\tconst polygonVertices = [\n\t\t...centers.map((center) => upPolyVGen(center)),\n\t\t...invCenters.map((invCenter) => downPolyVGen(invCenter)),\n\t];\n\n\tcenters = [];\n\tinvCenters = [];\n\n\tif (animate) {\n\t\tlet i = 0;\n\t\tinterval.i = setInterval(() => {\n\t\t\tif (i === polygonVertices.length) clearInterval(interval.i);\n\t\t\telse {\n\t\t\t\tSVGRef.appendChild(\n\t\t\t\t\tcreateSVGPathPolygonElement({\n\t\t\t\t\t\tcolor: [0, 0, 0],\n\t\t\t\t\t\tpoints: polygonVertices[i],\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\ti++;\n\t\t\t}\n\t\t}, 5);\n\t} else {\n\t\tfor (const polygonVertex of polygonVertices)\n\t\t\tSVGRef.appendChild(\n\t\t\t\tcreateSVGPathPolygonElement({\n\t\t\t\t\tcolor: [0, 0, 0],\n\t\t\t\t\tpoints: polygonVertex,\n\t\t\t\t})\n\t\t\t);\n\t}\n}\n","import { useRef } from \"react\";\nimport { FillRenderer, cn } from \"@/lib/utils\";\nimport { Navigate, useParams } from \"react-router-dom\";\nimport FractalForm, { formSchema } from \"@/components/FractalForm\";\nimport FillFractalRuleSet from \"@/lib/rules/Fill\";\nimport SVGCanvas from \"@/components/SVGCanvas\";\n\nconst FillFrac = () => {\n\tconst { fracID } = useParams();\n\tconst SVGRef = useRef<SVGSVGElement>(null);\n\n\tif (!(fracID! in FillFractalRuleSet)) return <Navigate to=\"/geo-vis/404\" />;\n\n\tconst interval: { i?: NodeJS.Timeout } = { i: undefined };\n\n\tlet FractalInfo = FillFractalRuleSet[fracID!].rules();\n\n\tfunction SVGReset() {\n\t\tFractalInfo = FillFractalRuleSet[fracID!].rules();\n\t\tSVGRef.current!.innerHTML = \"\";\n\t\tclearInterval(interval.i);\n\t\tinterval.i = undefined;\n\t}\n\n\tfunction handleSubmit(data: formSchema) {\n\t\tSVGReset();\n\t\tFillRenderer(SVGRef.current!, {\n\t\t\t...data,\n\t\t\tinterval,\n\t\t\tFractalInfo,\n\t\t});\n\t}\n\n\tfunction handleSave() {\n\t\t// console.log(SVGRef.current);\n\t}\n\n\treturn (\n\t\t<article className={cn(\"flex w-full flex-col gap-8 py-2\", \"lg:flex-row\")}>\n\t\t\t<div className={cn(\"flex w-full flex-col\", \"lg:w-1/3\")}>\n\t\t\t\t<h3 className={cn(\"pb-4 text-2xl underline\", \"lg:text-3xl\")}>{FillFractalRuleSet[fracID!].name}</h3>\n\t\t\t\t<FractalForm\n\t\t\t\t\thandleSubmit={handleSubmit}\n\t\t\t\t\tSVGReset={SVGReset}\n\t\t\t\t\tmaxOrder={FillFractalRuleSet[fracID!].maxOrder}\n\t\t\t\t\thandleSave={handleSave}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={cn(\"flex justify-center\", \"lg:w-2/3\")}>\n\t\t\t\t<div className={cn(\"aspect-square w-full rounded-xl bg-slate-200\", \"lg:w-[80vh]\")}>\n\t\t\t\t\t<SVGCanvas ref={SVGRef} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</article>\n\t);\n};\n\nexport default FillFrac;\n"],"names":["FillRenderer","SVGRef","animate","order","FractalInfo","colored","interval","centers","invCenters","downPolyVGen","upPolyVGen","polygonVertices","center","invCenter","i","createSVGPathPolygonElement","polygonVertex","FillFrac","fracID","useParams","useRef","FillFractalRuleSet","jsx","Navigate","SVGReset","handleSubmit","data","handleSave","cn","jsxs","FractalForm","SVGCanvas"],"mappings":"0QAGgB,SAAAA,EAAaC,EAAuB,CAAE,QAAAC,EAAS,MAAAC,EAAO,YAAAC,EAAa,QAAAC,EAAS,SAAAC,GAAgC,CACvH,IAAAC,EAAmB,CAAC,CAACH,EAAY,OAAO,CAAC,EAAGA,EAAY,OAAO,CAAC,CAAC,CAAC,EAClEI,EAAsB,CAAA,EAE1B,MAAMC,EAAeL,EAAY,SAASD,EAAO,EAAI,EAC/CO,EAAaN,EAAY,SAASD,EAAO,EAAK,EAE7C,KAAAA,KAAS,CAACI,EAASC,CAAU,EAAIJ,EAAY,MAAMG,EAASC,CAAU,EAK7E,MAAMG,EAAkB,CACvB,GAAGJ,EAAQ,IAAKK,GAAWF,EAAWE,CAAM,CAAC,EAC7C,GAAGJ,EAAW,IAAKK,GAAcJ,EAAaI,CAAS,CAAC,CAAA,EAMzD,GAHAN,EAAU,CAAA,EACVC,EAAa,CAAA,EAETN,EAAS,CACZ,IAAIY,EAAI,EACCR,EAAA,EAAI,YAAY,IAAM,CAC1BQ,IAAMH,EAAgB,OAAQ,cAAcL,EAAS,CAAC,GAElDL,EAAA,YACNc,EAA4B,CAC3B,MAAO,CAAC,EAAG,EAAG,CAAC,EACf,OAAQJ,EAAgBG,CAAC,CAAA,CACzB,CAAA,EAEFA,MAEC,CAAC,CAAA,KAEJ,WAAWE,KAAiBL,EACpBV,EAAA,YACNc,EAA4B,CAC3B,MAAO,CAAC,EAAG,EAAG,CAAC,EACf,OAAQC,CAAA,CACR,CAAA,CAGL,CCvCA,MAAMC,EAAW,IAAM,CAChB,KAAA,CAAE,OAAAC,GAAWC,IACblB,EAASmB,SAAsB,IAAI,EAEzC,GAAI,EAAEF,KAAWG,GAA4B,OAAAC,EAAA,IAACC,EAAS,CAAA,GAAG,cAAe,CAAA,EAEnE,MAAAjB,EAAmC,CAAE,EAAG,MAAU,EAExD,IAAIF,EAAciB,EAAmBH,CAAO,EAAE,MAAM,EAEpD,SAASM,GAAW,CACLpB,EAAAiB,EAAmBH,CAAO,EAAE,MAAM,EAChDjB,EAAO,QAAS,UAAY,GAC5B,cAAcK,EAAS,CAAC,EACxBA,EAAS,EAAI,MACd,CAEA,SAASmB,EAAaC,EAAkB,CAC9BF,IACTxB,EAAaC,EAAO,QAAU,CAC7B,GAAGyB,EACH,SAAApB,EACA,YAAAF,CAAA,CACA,CACF,CAEA,SAASuB,GAAa,CAEtB,CAEA,cACE,UAAQ,CAAA,UAAWC,EAAG,kCAAmC,aAAa,EACtE,SAAA,CAAAC,EAAA,KAAC,MAAI,CAAA,UAAWD,EAAG,uBAAwB,UAAU,EACpD,SAAA,CAACN,EAAAA,IAAA,KAAA,CAAG,UAAWM,EAAG,0BAA2B,aAAa,EAAI,SAAAP,EAAmBH,CAAO,EAAE,IAAK,CAAA,EAC/FI,EAAA,IAACQ,EAAA,CACA,aAAAL,EACA,SAAAD,EACA,SAAUH,EAAmBH,CAAO,EAAE,SACtC,WAAAS,CAAA,CACD,CAAA,EACD,QACC,MAAI,CAAA,UAAWC,EAAG,sBAAuB,UAAU,EACnD,SAACN,MAAA,MAAA,CAAI,UAAWM,EAAG,+CAAgD,aAAa,EAC/E,SAAAN,EAAA,IAACS,GAAU,IAAK9B,EAAQ,EACzB,CACD,CAAA,CACD,CAAA,CAAA,CAEF"}