import{r as y,j as e,c as n,h as F,B as g,u as D,N as L}from"./index-29L34l6h.js";import{m as N,a as b}from"./complex-w3zDMYH0.js";import{i as S,u as T,F as $,b as M,d as R,e as E,f as C,I as k,g as G,h as V,z as w,t as H,S as z}from"./SVGCanvas-cjQ4KCCz.js";import{A as j}from"./Attractor-92myYh06.js";function B(a,{order:i,animate:c,AttractorInfo:r,interval:m}){const x=Math.pow(10,i),u=r.scale,f=r.shift,o=r.origins.length;if(c){const s=Array.from({length:o},(t,d)=>Array.from({length:x},()=>[r.origins[d][0],r.origins[d][1]])),h=s.map(t=>t.map(d=>{const[p,A]=N(b(d,f),u),v=S({x:p,y:-A,color:[0,0,0]});return a.appendChild(v),v}));let l=0;m.i=setInterval(()=>{for(let t=0;t<o;t++)s[t][(l+1)%x]=r.rules(s[t][l]);l=(l+1)%x;for(let t=0;t<o;t++){const[d,p]=N(b(s[t][l],f),u);if(isNaN(d)||isNaN(p))throw new Error("wtf");h[t][l].setAttributeNS(null,"cx",`${d}`),h[t][l].setAttributeNS(null,"cy",`${-p}`)}},1)}else{const s=r.origins;for(let h=0;h<Math.pow(10,i);h++)for(let l=0;l<o;l++){const[t,d]=N(b(s[l],f),u);if(isNaN(t)||isNaN(d))throw new Error("wtf");a.appendChild(S({x:t,y:-d,color:[0,0,0]})),s[l]=r.rules(s[l])}}}function P(a,i){const c={order:w.coerce.number().min(0,{message:"should be greater than or equal to 0"}).max(a,{message:`should be less than or equal to ${a}`}).int({message:"Must be an Integer Value"})};for(const r of i)c[r[0]]=w.coerce.number().finite();return w.object(c)}const q=y.forwardRef(({handleSubmit:a,SVGReset:i,handleSave:c,maxOrder:r,symbols:m},x)=>{const u={order:r};for(const s of m)u[s[0]]=s[1];const f=P(r,m),o=T({resolver:H(f),defaultValues:u});return e.jsx($,{...o,children:e.jsxs("form",{className:"w-full",onSubmit:s=>void o.handleSubmit(a)(s),onReset:()=>{i(),o.reset()},children:[e.jsxs("div",{children:[e.jsx(M,{control:o.control,name:"order",render:({field:s})=>e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:n("w-1/3 text-base","lg:text-lg"),children:"Depth"}),e.jsx(C,{className:"w-11",children:e.jsx(k,{type:"number",className:"h-6 p-2 text-center",...s})})]}),e.jsxs(G,{children:["The iterative depth for the fractal",e.jsx("br",{}),"Must be between 0 and",` ${r}`]}),e.jsx(V,{})]})}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(F,{className:n("my-2 bg-neutral-950","dark:bg-neutral-50")}),e.jsx("div",{className:n("text-xl","lg:text-2xl"),children:"Attractor Paramerters"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-10 gap-y-2",children:m.map(([s])=>e.jsx(M,{control:o.control,name:s,render:({field:h})=>e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:n("w-1/3 text-base","lg:text-lg"),children:s}),e.jsx(C,{className:"w-2/3",children:e.jsx(k,{type:"number",className:"h-6 p-2 text-center",...h})})]}),e.jsx(V,{})]})},s))}),e.jsx("p",{className:"text-sm font-medium text-red-500 dark:text-red-900",ref:x}),e.jsx(F,{className:n("my-2 bg-neutral-950","dark:bg-neutral-50")})]})]}),e.jsxs("div",{className:"flex w-full justify-between pt-4",children:[e.jsx(g,{type:"submit",className:n("w-1/4 rounded-md"),children:"Draw"}),e.jsx(g,{type:"reset",className:n("w-1/4 rounded-md"),children:"Reset"}),e.jsx(g,{type:"button",className:n("w-1/4 rounded-md"),onClick:c,disabled:!0,children:"Save"})]})]})})});q.displayName="AttractorForm";const Q=()=>{const{attrID:a}=D(),i=y.useRef(null),c=y.useRef(null);if(!(a in j))return e.jsx(L,{to:"/geo-vis/404"});const r={i:void 0};function m(){i.current.innerHTML="",clearInterval(r.i),r.i=void 0,c.current&&(c.current.innerHTML="")}function x({order:f,...o}){m();try{B(i.current,{order:f,animate:!1,interval:r,colored:!1,AttractorInfo:j[a].rules(o)})}catch{m(),c.current&&(c.current.innerHTML="Some Error has occured while calculating, try with different parameters")}}function u(){}return e.jsxs("article",{className:n("flex w-full flex-col gap-8 py-2","lg:flex-row"),children:[e.jsxs("div",{className:n("flex w-full flex-col","lg:w-1/3"),children:[e.jsx("h3",{className:n("pb-4 text-2xl underline","lg:text-3xl"),children:j[a].name}),e.jsx(q,{handleSubmit:x,SVGReset:m,maxOrder:j[a].maxOrder,handleSave:u,symbols:j[a].symbolNames,ref:c})]}),e.jsx("div",{className:n("flex justify-center","lg:w-2/3"),children:e.jsx("div",{className:n("aspect-square w-full rounded-xl bg-slate-200","lg:w-[80vh]"),children:e.jsx(z,{ref:i})})})]})};export{Q as default};
//# sourceMappingURL=Attractor-17eyncCZ.js.map
